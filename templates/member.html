{% extends 'base.html' %}

{% block content %}

{% load static %}

<header class="row bg-black">
  <div class="col-md-4 py-2 align-items-center mt-4 d-flex flex-column" >
    <img src="{{member.profile_pic.url}}" class="img-fluid align-items-center" style=" width:20rem; height: 20rem; border-radius: 50%;"/>
    <h4 class="mt-3">{{member.get_position_display}} | {{member.language}}</h4>
  </div>

  <div class="col-md-8 my-auto p-4">
    <h1>Welcome!</h1>
    <h2>I am <strong class="storn">{{member.first_name}} {{member.last_name}}</strong></h2>    
    <h4>{{member.about_me}}</h4>

    <div class="buttons d-flex justify-content-between align-items-center">
        <a class="btn btn-primary btn-lg rounded my-3" href="{{member.cv.url}}">Download my CV</a>
        
        {% if member.id %}
        {% if user.id != member.id and not member.id in friends %}
            <a href="{% url 'port:add_friend' member.id %}" class="btn btn-info ">AÃ±adir amigo</a>
        {% endif %}
        
        {% if user.id != member.id and member.id in friends %}          
            <a href="{% url 'port:del_friend' fri.id %}" class="btn btn-danger ">Eliminar amigo</a>       
        {% endif %}
        {% endif %}

        {% if user.id == member.id %}
            <button type='button' class='btn btn-success my-4 ' data-bs-toggle="modal" data-bs-target="#createProject">
                Upload project
            </button>
        {% endif %}
    </div>
    
            
        
      

  </div>
</header>

<!-- Porfolio Section -->
<div class="row my-4 text-center">

  <h2 class="my-4" id="project">My <strong class="storn">Projects</strong></h2>
  
  
  {% for project in projects %}
    {% if project.proyect_user.id == member.id %} 
        <div class="col-md-4 p-4">
        
            <div class="card bg-black card-project" style="box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1); box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1), 0px 0px 4px rgba(0, 0, 0, 0.1); border-radius: 1rem;">
              <div class="img mt-2" style="width: 100%;">
                <img src="{{project.img.url}}" alt="{{project.title}}" class="mt-1" style="width: 95%; border-radius: 0.3rem;" >
              </div>

                <div class="card-body text-center">

                <h2 class="border-bottom border-primary pb-2 text-primary">{{ project.title }}</h2>
                <p class="text-light">{{ project.description }}</p>

                <div class="urls d-flex justify-content-around align-items-center my-3 pt-2 border-top">

                    {% if project.url_proyect %}
                      <div class="child-card">
                        <a href="{{project.url_proyect}}" class="btn btn-primary rounded-3 btn-sm pb-2" target="__blank" rel="noreferrer">Visit the
                          Project</a>
                      </div>
                    {% endif %}
  
                    {% if project.url_repo %}
                      <div class="child-card">
                        <a href="{{project.url_repo}}" class="btn btn-primary rounded-3 btn-sm pb-2" target="__blank" rel="noreferrer">Visit the
                          Repo</a>
                      </div>
                    {% endif %}
  
                  </div>
                
                </div>
            </div>
            
        </div>

    {% endif %}
  {% endfor %}
</div>

<div class="technologies text-center">  

    <h2 class="my-5" id="tec">My <strong class="storn">skills</strong></h2>

    <div class="row bg-black text-center d-flex justify-content-center">      
      <div class=" col-md-10 d-flex flex-wrap justify-content-center">
   
        
    </div>
  </div>
</div>


<footer class="row contact text-center footer mt-5 ">
  <h3 class="my-2" id="contact">Con<strong class="storn">tacts</strong></h3>

  <div class=" col-md-12 bg-black d-flex justify-content-center flex-wrap">
    <picture class="d-flex">
      <img src="{% static 'img/icons8-mail-30.png' %}" alt="mail">
      <a href="mailto:{{member.email}}" target="_blank">{{member.email}}</a>
    </picture>
    <!-- <picture class="d-flex">
      <img src="{% static 'img/icons8-github2.svg' %}" alt="github">
      <a href="https://github.com/jwf12?tab=repositories" target="_blank">Github</a>
    </picture>
    <picture class="d-flex">
      <img src="{% static 'img/icons8-linkedin.svg' %}" alt="css3">
      <a href="https://www.linkedin.com/in/julian-ward-fraise/" target="_blank">LinkedIn</a>
    </picture> -->
  </div>














<!-- Create Project Modal -->
  <div class="modal fade" id="createProject" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel"><i class="bi bi-journal-bookmark"></i> Project</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        
    
        <form action="{% url 'port:create_project'%}" method = 'POST'>
            {% csrf_token %}
            <div class="modal-body">
                
              <div class="form-group m-3">
                <label for="proyect_user">User:</label>
                <input type="text" class="form-control" id="proyect_user" name="proyect_user" value="{{ user.id }}" readonly>
              </div>
              <div class="form-group m-3">
                  <label for="title">Title:</label>
                  <input type="text" class="form-control" id="title" name="title" required>
              </div>
              <div class="form-group m-3">
                  <label for="img">Project image:</label>
                  <input type="file" class="form-control" id="img" name="img" required>
              </div>
              <div class="form-group m-3">
                  <label for="description">Description:</label>
                  <textarea class="form-control" id="description" name="description" required></textarea>
              </div>
              <div class="form-group m-3">
                  <label for="coworker">Coworker:</label>
                  <select class="form-control" id="coworker" name="coworker">
                      <option value="" selected disabled>Choose a coworker</option>
                      {% for friend in friends %}
                          <option value="{{ friend.id }}">{{ friend.username }}</option>
                      {% endfor %}
                  </select>
              </div>
              <div class="form-group m-3">
                  <label for="url_proyect">Project URL:</label>
                  <input type="url" class="form-control" id="url_proyect" name="url_proyect">
              </div>
              <div class="form-group m-3">
                  <label for="url_repo">Repository URL:</label>
                  <input type="url" class="form-control" id="url_repo" name="url_repo">
              </div>
            
            </div>


            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Save</button>
            </div>

        </form>

        
      </div>
    </div>
</div>
{% endblock %}
